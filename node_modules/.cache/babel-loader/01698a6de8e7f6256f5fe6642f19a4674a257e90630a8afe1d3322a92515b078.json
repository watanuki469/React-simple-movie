{"ast":null,"code":"import _slicedToArray from\"C:/Users/ThanhCong/Downloads/react-simple-movies/react-simple-movies/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import useSWR from\"swr\";import{fetcher,tmdbAPI}from\"../config\";import MovieCard from\"components/movie/MovieCard\";import useDebounce from\"hooks/useDebounce\";import ReactPaginate from\"react-paginate\";import{MovieCardSkeleton}from\"components/movie/MovieCard\";import Button from\"components/button/Button\";import{v4}from\"uuid\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var itemsPerPage=20;var MoviePage=function MoviePage(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),pageCount=_useState2[0],setPageCount=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),itemOffset=_useState4[0],setItemOffset=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),nextPage=_useState6[0],setNextPage=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),fillter=_useState8[0],setFillter=_useState8[1];var _useState9=useState(tmdbAPI.getMovieList(\"popular\",nextPage)),_useState10=_slicedToArray(_useState9,2),url=_useState10[0],setUrl=_useState10[1];var fillterDebounce=useDebounce(fillter,500);var handleFilterChange=function handleFilterChange(e){setFillter(e.target.value);};var _useSWR=useSWR(url,fetcher),data=_useSWR.data,error=_useSWR.error;var loading=!data&&!error;useEffect(function(){if(fillterDebounce){setUrl(tmdbAPI.getMovieSearch(fillterDebounce,nextPage));}else{setUrl(tmdbAPI.getMovieList(\"popular\",nextPage));}},[fillterDebounce,nextPage]);var movies=(data===null||data===void 0?void 0:data.results)||[];// const { page, total_pages } = data;\nuseEffect(function(){if(!data||!data.total_results)return;setPageCount(Math.ceil(data.total_results/itemsPerPage));},[data,itemOffset]);// Invoke when user click to request another page.\nvar handlePageClick=function handlePageClick(event){var newOffset=event.selected*itemsPerPage%data.total_results;setItemOffset(newOffset);setNextPage(event.selected+1);};return/*#__PURE__*/_jsxs(\"div\",{className:\"page-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex mb-10\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"w-full p-4 bg-slate-800 text-white outline-none\",placeholder:\"Type here to search...\",onChange:handleFilterChange})}),/*#__PURE__*/_jsx(\"button\",{className:\"p-4 bg-primary text-white\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:\"1.5\",stroke:\"currentColor\",className:\"w-6 h-6\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z\"})})})]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"grid md:grid-cols-2 lg:grid-cols-4 md:gap-10\",children:new Array(itemsPerPage).fill(0).map(function(){return/*#__PURE__*/_jsx(MovieCardSkeleton,{},v4());})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-4 gap-10 md:grid-cols-2\",children:!loading&&movies.length>0&&movies.map(function(item){return/*#__PURE__*/_jsx(MovieCard,{item:item},item.id);})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-10\",children:/*#__PURE__*/_jsx(ReactPaginate,{breakLabel:\"...\",nextLabel:\">\",onPageChange:handlePageClick,pageRangeDisplayed:5,pageCount:pageCount,previousLabel:\"<\",renderOnZeroPageCount:null,className:\"pagination\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center mt-10 gap-x-5 hidden\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"cursor-pointer\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:\"1.5\",stroke:\"currentColor\",className:\"w-6 h-6\",onClick:function onClick(){return setNextPage(nextPage-1);},children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M15.75 19.5L8.25 12l7.5-7.5\"})})}),new Array(pageCount).fill(0).map(function(item,index){return/*#__PURE__*/_jsx(\"span\",{className:\"cursor-pointer  inline-block py-2 px-4 rounded leading-none bg-white text-slate-900\",onClick:function onClick(){return setNextPage(index+1);},children:index+1});}),/*#__PURE__*/_jsx(\"span\",{className:\"cursor-pointer\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:\"1.5\",stroke:\"currentColor\",className:\"w-6 h-6\",onClick:function onClick(){return setNextPage(nextPage+1);},children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M8.25 4.5l7.5 7.5-7.5 7.5\"})})})]})]});};export default MoviePage;","map":{"version":3,"names":["React","useEffect","useState","useSWR","fetcher","tmdbAPI","MovieCard","useDebounce","ReactPaginate","MovieCardSkeleton","Button","v4","itemsPerPage","MoviePage","pageCount","setPageCount","itemOffset","setItemOffset","nextPage","setNextPage","fillter","setFillter","getMovieList","url","setUrl","fillterDebounce","handleFilterChange","e","target","value","data","error","loading","getMovieSearch","movies","results","total_results","Math","ceil","handlePageClick","event","newOffset","selected","Array","fill","map","length","item","id","index"],"sources":["C:/Users/ThanhCong/Downloads/react-simple-movies/react-simple-movies/src/pages/MoviePage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport useSWR from \"swr\";\nimport { fetcher, tmdbAPI } from \"../config\";\nimport MovieCard from \"components/movie/MovieCard\";\nimport useDebounce from \"hooks/useDebounce\";\nimport ReactPaginate from \"react-paginate\";\nimport { MovieCardSkeleton } from \"components/movie/MovieCard\";\nimport Button from \"components/button/Button\";\nimport { v4 } from \"uuid\";\nconst itemsPerPage = 20;\n\nconst MoviePage = () => {\n  const [pageCount, setPageCount] = useState(0);\n  const [itemOffset, setItemOffset] = useState(0);\n  const [nextPage, setNextPage] = useState(1);\n  const [fillter, setFillter] = useState(\"\");\n  const [url, setUrl] = useState(tmdbAPI.getMovieList(\"popular\", nextPage));\n  const fillterDebounce = useDebounce(fillter, 500);\n  const handleFilterChange = (e) => {\n    setFillter(e.target.value);\n  };\n  const { data, error } = useSWR(url, fetcher);\n  const loading = !data && !error;\n  useEffect(() => {\n    if (fillterDebounce) {\n      setUrl(tmdbAPI.getMovieSearch(fillterDebounce, nextPage));\n    } else {\n      setUrl(tmdbAPI.getMovieList(\"popular\", nextPage));\n    }\n  }, [fillterDebounce, nextPage]);\n  const movies = data?.results || [];\n  // const { page, total_pages } = data;\n\n  useEffect(() => {\n    if (!data || !data.total_results) return;\n    setPageCount(Math.ceil(data.total_results / itemsPerPage));\n  }, [data, itemOffset]);\n\n  // Invoke when user click to request another page.\n  const handlePageClick = (event) => {\n    const newOffset = (event.selected * itemsPerPage) % data.total_results;\n    setItemOffset(newOffset);\n    setNextPage(event.selected + 1);\n  };\n\n  return (\n    <div className=\"page-container\">\n      <div className=\"flex mb-10\">\n        <div className=\"flex-1\">\n          <input\n            type=\"text\"\n            className=\"w-full p-4 bg-slate-800 text-white outline-none\"\n            placeholder=\"Type here to search...\"\n            onChange={handleFilterChange}\n          />\n        </div>\n        <button className=\"p-4 bg-primary text-white\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            strokeWidth=\"1.5\"\n            stroke=\"currentColor\"\n            className=\"w-6 h-6\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z\"\n            />\n          </svg>\n        </button>\n      </div>\n      {/* {loading && (\n        <div className=\"w-10 h-10 rounded-full border-4 border-primary border-t-transparent border-t-4 mx-auto animate-spin\"></div>\n      )} */}\n      {loading && (\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-4 md:gap-10\">\n          {new Array(itemsPerPage).fill(0).map(() => (\n            <MovieCardSkeleton key={v4()}></MovieCardSkeleton>\n          ))}\n        </div>\n      )}\n      <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-10 md:grid-cols-2\">\n        {!loading &&\n          movies.length > 0 &&\n          movies.map((item) => (\n            <MovieCard key={item.id} item={item}></MovieCard>\n          ))}\n      </div>\n\n      <div className=\"mt-10\">\n        <ReactPaginate\n          breakLabel=\"...\"\n          nextLabel=\">\"\n          onPageChange={handlePageClick}\n          pageRangeDisplayed={5}\n          pageCount={pageCount}\n          previousLabel=\"<\"\n          renderOnZeroPageCount={null}\n          className=\"pagination\"\n        />\n      </div>\n      <div className=\"flex items-center justify-center mt-10 gap-x-5 hidden\">\n        <span className=\"cursor-pointer\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            strokeWidth=\"1.5\"\n            stroke=\"currentColor\"\n            className=\"w-6 h-6\"\n            onClick={() => setNextPage(nextPage - 1)}\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M15.75 19.5L8.25 12l7.5-7.5\"\n            />\n          </svg>\n        </span>\n        {new Array(pageCount).fill(0).map((item, index) => (\n          <span\n            className=\"cursor-pointer  inline-block py-2 px-4 rounded leading-none bg-white text-slate-900\"\n            onClick={() => setNextPage(index + 1)}\n          >\n            {index + 1}\n          </span>\n        ))}\n\n        <span className=\"cursor-pointer\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            strokeWidth=\"1.5\"\n            stroke=\"currentColor\"\n            className=\"w-6 h-6\"\n            onClick={() => setNextPage(nextPage + 1)}\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M8.25 4.5l7.5 7.5-7.5 7.5\"\n            />\n          </svg>\n        </span>\n      </div>\n    </div>\n  );\n};\n\nexport default MoviePage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}